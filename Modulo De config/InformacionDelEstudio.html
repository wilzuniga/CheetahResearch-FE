<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <link rel="icon" type="image/x-icon" href="assets/img/NegroLogo.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Informacion del Estudio - Cheetah Research</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=League+Spartan&amp;display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="assets/fonts/ionicons.min.css">
    <link rel="stylesheet" href="assets/css/bs-theme-overrides.css">
    <link rel="stylesheet" href="assets/css/Features-Small-Icons-icons.css">
    <link rel="stylesheet" href="assets/css/untitled.css">

    <link rel="stylesheet" href="assets/assets_accounts/css/Hover.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>


    <style>


        /* Contenedor principal con efecto cristal */
        #contentCard_PaginaOverview {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px);
            border: none !important;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border-radius: 20px !important;
        }

        /* Secciones modulares */
        .form-section {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: visible;
        }

        .form-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--bs-CR-orange) 0%, #ff8c42 100%);
            border-radius: 15px 15px 0 0;
        }

        /* Títulos de sección */
        .form-section p, .section-title, h2 {
            font-size: 20px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            z-index: 2;
            font-family: hedliner !important;
        }

        .form-section p::before, .section-title::before {
            content: '';
            width: 6px;
            height: 6px;
            background: var(--bs-CR-orange);
            border-radius: 50%;
            flex-shrink: 0;
        }

        /* Controles de formulario modernos */
        .form-control {
            border: 2px solid #e9ecef !important;
            border-radius: 10px !important;
            padding: 12px 16px !important;
            font-size: 14px !important;
            transition: all 0.3s ease !important;
            background: rgba(255, 255, 255, 0.9) !important;
            font-family: IBM Plex Sans !important;
        }

        .form-control:focus {
            border-color: var(--bs-CR-orange) !important;
            box-shadow: 0 0 0 0.2rem rgba(255, 140, 66, 0.25) !important;
            background: #ffffff !important;
            transform: translateY(-1px) !important;
        }

        .form-control:hover {
            border-color: #dee2e6 !important;
            background: #ffffff !important;
        }

        /* Botones modernos */
        .btn {
            border-radius: 10px !important;
            padding: 12px 24px !important;
            font-weight: 600 !important;
            font-size: 14px !important;
            font-family: hedliner !important;
            transition: all 0.3s ease !important;
            border: none !important;
            position: relative !important;
            overflow: hidden !important;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15) !important;
        }

        .btn:active {
            transform: translateY(0) !important;
        }

        /* Botón primario */
        .btn-primary {
            background: linear-gradient(135deg, var(--bs-CR-orange) 0%, #ff8c42 100%) !important;
            color: var(--bs-CR-gray) !important;
            box-shadow: 0 4px 8px rgba(255, 140, 66, 0.3) !important;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #ff8c42 0%, var(--bs-CR-orange) 100%) !important;
            box-shadow: 0 8px 16px rgba(255, 140, 66, 0.4) !important;
        }

        /* Botón secundario */
        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%) !important;
            color: white !important;
            box-shadow: 0 4px 8px rgba(108, 117, 125, 0.3) !important;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #495057 0%, #6c757d 100%) !important;
            box-shadow: 0 8px 16px rgba(108, 117, 125, 0.4) !important;
        }

        /* Cards modernas */
        .card {
            border: none !important;
            border-radius: 15px !important;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08) !important;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
            overflow: hidden !important;
            position: relative !important;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--bs-CR-orange) 0%, #ff8c42 100%);
        }

        .card-header {
            background: rgba(255, 255, 255, 0.5) !important;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
            padding: 20px !important;
            font-family: hedliner !important;
        }

        .card-body {
            padding: 20px !important;
        }

        /* Animaciones */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-section, .card {
            animation: fadeInUp 0.6s ease-out;
        }

        .form-section:nth-child(1) { animation-delay: 0s; }
        .form-section:nth-child(2) { animation-delay: 0.1s; }
        .form-section:nth-child(3) { animation-delay: 0.2s; }
        .form-section:nth-child(4) { animation-delay: 0.3s; }
        .form-section:nth-child(5) { animation-delay: 0.4s; }
        .form-section:nth-child(6) { animation-delay: 0.5s; }

        /* Sidebar z-index fix */
        .sidebar {
            z-index: 1000 !important;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .form-section {
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 10px;
            }
        }

        /*media query para que desaparezca el img si el display no es hd+*/
        @media (max-width: 1080px) {
            img {
                display: none;
            }
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .consumption-modal {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 700px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            font-family: 'hedliner', sans-serif;
            border: 3px solid var(--bs-CR-orange);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid var(--bs-CR-orange);
            padding-bottom: 20px;
        }

        .modal-title {
            color: #2c3e50;
            font-size: 32px;
            font-weight: bold;
            margin: 0;
            font-family: hedliner;
        }

        .modal-subtitle {
            color: #666;
            font-size: 16px;
            margin: 8px 0 0 0;
            font-family: 'IBM Plex Sans', sans-serif;
        }

        .consumption-section {
            margin-bottom: 25px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bs-CR-orange) 0%, #ff8c42 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 2px solid var(--bs-CR-orange);
            border-radius: 10px;
            padding: 15px;
            min-height: 60px;
            font-family: 'IBM Plex Sans', sans-serif;
        }

        .analysis-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .analysis-item {
            padding: 8px 12px;
            background: rgba(255, 165, 0, 0.1);
            margin-bottom: 8px;
            border-radius: 8px;
            border-left: 4px solid var(--bs-CR-orange);
            font-size: 14px;
        }

        .analysis-item:last-child {
            margin-bottom: 0;
        }

        .stat-box {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: linear-gradient(135deg, var(--bs-CR-orange) 0%, #ff8c42 100%);
            color: white;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .stat-label {
            font-size: 16px;
            font-weight: 600;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
        }

        .loading-spinner {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: var(--bs-CR-orange);
            font-size: 14px;
        }

        .loading-spinner .spinner {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 165, 0, 0.3);
            border-top-color: var(--bs-CR-orange);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .modal-buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .modal-btn {
            flex: 1;
            padding: 14px 24px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'hedliner', sans-serif;
        }

        .btn-export {
            background: linear-gradient(135deg, var(--bs-CR-orange) 0%, #ff8c42 100%);
            color: var(--bs-CR-gray);
            box-shadow: 0 4px 8px rgba(255, 140, 66, 0.3);
        }

        .btn-export:hover {
            background: linear-gradient(135deg, #ff8c42 0%, var(--bs-CR-orange) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(255, 140, 66, 0.4);
        }

        .btn-close-modal {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            box-shadow: 0 4px 8px rgba(108, 117, 125, 0.3);
        }

        .btn-close-modal:hover {
            background: linear-gradient(135deg, #495057 0%, #6c757d 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(108, 117, 125, 0.4);
        }

        .close-x {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 28px;
            color: #666;
            cursor: pointer;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-x:hover {
            background: rgba(255, 0, 0, 0.1);
            color: #dc3545;
            transform: rotate(90deg);
        }

        .no-data {
            color: #999;
            font-style: italic;
            text-align: center;
            padding: 15px;
        }
    </style>
</head>

<body id="page-top" style="overflow-y: hidden;" >
    <div id="wrapper">
        <nav class="navbar d-lg-flex d-xl-flex d-xxl-flex align-items-lg-end align-items-xxl-start sidebar sidebar-dark accordion bg-gradient-primary p-0 navbar-dark" style="border-top-right-radius: 10px; border-bottom-right-radius: 10px; background: #000000;">
            <div class="container-fluid d-flex flex-column p-0">
                <a class="navbar-brand d-xxl-flex align-items-center justify-content-xxl-center align-items-xxl-center sidebar-brand m-0" href="https://www.cheetah-research.ai/home/"><img style="height: auto;width: 189px;margin: -11px;margin-bottom: 0px; margin-top: 10px;" src="assets/img/NegroLogo.png" /></a>
                <p class="text-light" id="nombreProyectoLbl" style="font-family: 'hedliner', sans-serif;font-size: 12px;margin-left: 10px;"></p>
                <div style="height: 30px;"></div>
                <ul id="accordionSidebar" class="navbar-nav text-light" style="font-family: hedliner;">
                    <li id="CreacionDeEstudioLNK" class="nav-item" style="font-family: hedliner;">
                        <a class="nav-link" href="https://www.cheetah-research.ai/configuration/study/" style="font-family: Nunito, sans-serif;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" fill="none" style="font-size: 20px;font-family: hedliner;color: var(--bs-CR-orange);">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18ZM11 7C11 6.44772 10.5523 6 10 6C9.44772 6 9 6.44772 9 7V9H7C6.44772 9 6 9.44771 6 10C6 10.5523 6.44772 11 7 11H9V13C9 13.5523 9.44772 14 10 14C10.5523 14 11 13.5523 11 13V11H13C13.5523 11 14 10.5523 14 10C14 9.44772 13.5523 9 13 9H11V7Z" fill="currentColor"></path>
                            </svg>
                            <span style="font-family: hedliner;" data-i18n="navbar.create_study">CREACION DE ESTUDIO</span>
                        </a>
                    </li>
                    <li id="CreacionDeEncuestadorLNK" class="nav-item" style="font-family: hedliner;">
                        <a class="nav-link" href="https://www.cheetah-research.ai/configuration/interviewer/" style="font-family: hedliner;">
                            <i class="icon ion-android-people" style="font-size: 20px;font-family: hedliner;color: var(--bs-CR-orange);"></i>
                            <span style="font-family: hedliner;" data-i18n="navbar.pollster">ENCUESTADOR</span>
                        </a>
                    </li>
                    <li id="CreacionDeEncuestaLNK" class="nav-item" style="font-family: hedliner;">
                        <a class="nav-link" href="https://www.cheetah-research.ai/configuration/survey/" style="font-family: hedliner;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" fill="none" style="font-size: 21px;font-family: hedliner;color: var(--bs-CR-orange);">
                                <path d="M8 2C7.44772 2 7 2.44772 7 3C7 3.55228 7.44772 4 8 4H10C10.5523 4 11 3.55228 11 3C11 2.44772 10.5523 2 10 2H8Z" fill="currentColor"></path>
                                <path d="M3 5C3 3.89543 3.89543 3 5 3C5 4.65685 6.34315 6 8 6H10C11.6569 6 13 4.65685 13 3C14.1046 3 15 3.89543 15 5V11H10.4142L11.7071 9.70711C12.0976 9.31658 12.0976 8.68342 11.7071 8.29289C11.3166 7.90237 10.6834 7.90237 10.2929 8.29289L7.29289 11.2929C6.90237 11.6834 6.90237 12.3166 7.29289 12.7071L10.2929 15.7071C10.6834 16.0976 11.3166 16.0976 11.7071 15.7071C12.0976 15.3166 12.0976 14.6834 11.7071 14.2929L10.4142 13H15V16C15 17.1046 14.1046 18 13 18H5C3.89543 18 3 17.1046 3 16V5Z" fill="currentColor"></path>
                                <path d="M15 11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H15V11Z" fill="currentColor"></path>
                            </svg>
                            <span style="font-family: hedliner;" data-i18n="navbar.survey">ENCUESTA</span>
                        </a>
                    </li>
                    <li id="LanzarEncuestaLNK" class="nav-item" style="font-family: hedliner;">
                        <a class="nav-link" href="https://www.cheetah-research.ai/configuration/launch/" style="font-family: hedliner;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" fill="none" style="font-size: 20px;font-family: hedliner;color: var(--bs-CR-orange);">
                                <path d="M4.5547 5.16795C4.24784 4.96338 3.8533 4.94431 3.52814 5.11833C3.20298 5.29235 3 5.63121 3 6V14C3 14.3688 3.20298 14.7077 3.52814 14.8817C3.8533 15.0557 4.24784 15.0366 4.5547 14.8321L10 11.2019V14C10 14.3688 10.203 14.7077 10.5281 14.8817C10.8533 15.0557 11.2478 15.0366 11.5547 14.8321L17.5547 10.8321C17.8329 10.6466 18 10.3344 18 10C18 9.66565 17.8329 9.35342 17.5547 9.16795L11.5547 5.16795C11.2478 4.96338 10.8533 4.94431 10.5281 5.11833C10.203 5.29235 10 5.63121 10 6V8.79815L4.5547 5.16795Z" fill="currentColor"></path>
                            </svg>
                            <span style="font-family: hedliner;" data-i18n="navbar.launch_study">LANZAR ESTUDIO</span>
                        </a>
                    </li>
                    <li id="InformacionDeEstudioLNK" class="nav-item" style="font-family: hedliner;">
                        <a class="nav-link active" href="https://www.cheetah-research.ai/configuration/studyInfo/" style="font-family: hedliner;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" fill="none" style="font-size: 20px;font-family: hedliner;color: var(--bs-CR-orange);">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M2 5C2 3.89543 2.89543 3 4 3H12C13.1046 3 14 3.89543 14 5V15C14 16.1046 14.8954 17 16 17H4C2.89543 17 2 16.1046 2 15V5ZM5 6H11V10H5V6ZM11 12H5V14H11V12Z" fill="currentColor"></path>
                                <path d="M15 7H16C17.1046 7 18 7.89543 18 9V14.5C18 15.3284 17.3284 16 16.5 16C15.6716 16 15 15.3284 15 14.5V7Z" fill="currentColor"></path>
                            </svg>
                            <span style="font-family: hedliner;" data-i18n="navbar.study_info">INFORMACION DE ESTUDIO</span>
                        </a>
                    </li>
                    <li id="VisualizacionDeResultadosLNK" class="nav-item" style="font-family: hedliner;">
                        <a class="nav-link" href="https://www.cheetah-research.ai/configuration/data_display/" style="font-family: hedliner;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" fill="none" style="font-size: 20px;font-family: Nunito, sans-serif;color: var(--bs-CR-orange);">
                                <path d="M2 11C2 10.4477 2.44772 10 3 10H5C5.55228 10 6 10.4477 6 11V16C6 16.5523 5.55228 17 5 17H3C2.44772 17 2 16.5523 2 16V11Z" fill="currentColor"></path>
                                <path d="M8 7C8 6.44772 8.44772 6 9 6H11C11.5523 6 12 6.44772 12 7V16C12 16.5523 11.5523 17 11 17H9C8.44772 17 8 16.5523 8 16V7Z" fill="currentColor"></path>
                                <path d="M14 4C14 3.44772 14.4477 3 15 3H17C17.5523 3 18 3.44772 18 4V16C18 16.5523 17.5523 17 17 17H15C14.4477 17 14 16.5523 14 16V4Z" fill="currentColor"></path>
                            </svg>
                            <span style="font-family: hedliner;" data-i18n="navbar.results">VISUALIZACION DE RESULTADOS</span>
                        </a>
                    </li>
                    <li id="HerramientasDeAdminLNK" class="nav-item" style="font-family: hedliner;">
                        <a class="nav-link" href="https://www.cheetah-research.ai/configuration/admin/" style="font-family: hedliner;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" fill="none" style="font-size: 20px;color: var(--bs-CR-orange);">
                                <path d="M5 4C5 3.44772 4.55228 3 4 3C3.44772 3 3 3.44772 3 4V11.2676C2.4022 11.6134 2 12.2597 2 13C2 13.7403 2.4022 14.3866 3 14.7324V16C3 16.5523 3.44772 17 4 17C4.55228 17 5 16.5523 5 16V14.7324C5.5978 14.3866 6 13.7403 6 13C6 12.2597 5.5978 11.6134 5 11.2676V4Z" fill="currentColor"></path>
                                <path d="M11 4C11 3.44772 10.5523 3 10 3C9.44772 3 9 3.44772 9 4V5.26756C8.4022 5.61337 8 6.25972 8 7C8 7.74028 8.4022 8.38663 9 8.73244V16C9 16.5523 9.44772 17 10 17C10.5523 17 11 16.5523 11 16V8.73244C11.5978 8.38663 12 7.74028 12 7C12 6.25972 11.5978 5.61337 11 5.26756V4Z" fill="currentColor"></path>
                                <path d="M16 3C16.5523 3 17 3.44772 17 4V11.2676C17.5978 11.6134 18 12.2597 18 13C18 13.7403 17.5978 14.3866 17 14.7324V16C17 16.5523 16.5523 17 16 17C15.4477 17 15 16.5523 15 16V14.7324C14.4022 14.3866 14 13.7403 14 13C14 12.2597 14.4022 11.6134 15 11.2676V4C15 3.44772 15.4477 3 16 3Z" fill="currentColor"></path>
                            </svg>
                            <span style="font-family: hedliner;" data-i18n="navbar.admin_tools">HERRAMIENTAS</span>
                        </a>
                    </li>
                </ul>
            </div>
            <!-- Test de Idiomas -->
            <select id="languageSwitcher" style="display: none; margin: 10px;">
                <option value="es">Español</option>
                <option value="en">English</option>
                <option value="pt">Português</option>
            </select>
        </nav>
        <div class="d-flex flex-column" id="content-wrapper">
            <div id="content">
                <div class="card" id="contentCard_PaginaOverview" style="margin: 0px;height: calc(100vh - 0px);padding: 10px;overflow-y: scroll; position: relative;">
                    <h2 style="color: var(--bs-emphasis-color);font-weight: bold;font-family: hedliner;" data-i18n="InformacionDelEstudio.title">Transcripción de Encuestas</h2>
                    <div class="p-3 p-xl-4" style="font-family: hedliner;">
                        
                        <div class="d-flex align-items-center" style="font-size: 24px; font-weight: bold; font-family: hedliner;">
                            <span data-i18n="InformacionDelEstudio.hSurveyCount">Encuestas Aplicadas:</span>
                            <label id="EncuestasLBL" style="margin-left: 10px;">0</label>
                        </div>

                        <hr>
                        <div class="d-flex">
                            <div id="divBotones" style="flex: 1; padding-right: 15px;">
                                <div class="d-xxl-flex justify-content-xxl-start align-items-xxl-end" style="width: 100%;margin-top: 10px;font-family: hedliner;">
                                    <button class="btn btn-primary d-block w-100" id="DescargarTranscrptBtn" style="font-weight: bold;font-size: 20px;border-top-left-radius: 10px;border-top-right-radius: 10px;border-bottom-right-radius: 10px;border-bottom-left-radius: 10px;margin-right: 10px;margin-bottom: 10px;font-family: hedliner;color: var(--bs-CR-gray); background-color: var(--bs-CR-orange);" data-i18n="InformacionDelEstudio.btTranscriptions">
                                        <i class="fas fa-download"></i>
                                        Descargar Transcripciones
                                    </button>
                                </div>
                                <div class="d-xxl-flex justify-content-xxl-start align-items-xxl-end" style="width: 100%;margin-top: 10px;font-family: hedliner;">
                                    <button class="btn btn-primary d-block w-100" id="DescargarTranscrptBtnBckup" style="font-weight: bold;font-size: 20px;border-top-left-radius: 10px;border-top-right-radius: 10px;border-bottom-right-radius: 10px;border-bottom-left-radius: 10px;margin-right: 10px;margin-bottom: 10px;font-family: hedliner;color: var(--bs-CR-gray); background-color: var(--bs-CR-orange);" data-i18n="InformacionDelEstudio.btNonProcessedTranscriptions">
                                        <i class="fas fa-file-download"></i>
                                        Descargar Transcripciones No Procesadas
                                    </button>
                                </div>
                                <div class="d-xxl-flex justify-content-xxl-start align-items-xxl-end" style="width: 100%;margin-top: 10px;font-family: hedliner;">
                                    <button class="btn btn-primary d-block w-100" id="DescargarLogOTPBtn" style="font-weight: bold;font-size: 20px;border-top-left-radius: 10px;border-top-right-radius: 10px;border-bottom-right-radius: 10px;border-bottom-left-radius: 10px;margin-right: 10px;margin-bottom: 10px;font-family: hedliner;color: var(--bs-CR-gray); background-color: var(--bs-CR-orange);" data-i18n="InformacionDelEstudio.btLogOTP">
                                        <i class="fas fa-clipboard-list"></i>
                                        Descargar Log OTP
                                    </button>
                                </div>
                                <div class="d-xxl-flex justify-content-xxl-start align-items-xxl-end" style="width: 100%;margin-top: 10px;font-family: hedliner;">
                                    <button class="btn btn-primary d-block w-100" id="BorrarBtn" style="font-weight: bold;font-size: 20px;border-top-left-radius: 10px;border-top-right-radius: 10px;border-bottom-right-radius: 10px;border-bottom-left-radius: 10px;margin-right: 10px;margin-bottom: 10px;font-family: hedliner;color: var(--bs-CR-gray); background-color: var(--bs-CR-orange);" data-i18n="InformacionDelEstudio.btDelFiles">
                                        <i class="fas fa-trash"></i>
                                        Borrar Archivos
                                    </button>
                                </div>
                                <div class="d-xxl-flex justify-content-xxl-start align-items-xxl-end" style="width: 100%;margin-top: 10px;font-family: hedliner;">
                                    <button class="btn btn-warning d-block w-100" id="duplicateStudyBtn" style="font-weight: bold;font-size: 20px;border-top-left-radius: 10px;border-top-right-radius: 10px;border-bottom-right-radius: 10px;border-bottom-left-radius: 10px;margin-right: 10px;margin-bottom: 10px;font-family: hedliner;color: var(--bs-CR-gray); background-color: var(--bs-CR-orange);" data-i18n="InformacionDelEstudio.btDuplicate">
                                        <i class="fas fa-copy"></i>
                                        Duplicar Estudio
                                    </button>
                                </div>
                                <div class="d-xxl-flex justify-content-xxl-start align-items-xxl-end" style="width: 100%;margin-top: 10px;font-family: hedliner;">
                                    <button class="btn btn-info d-block w-100" id="analyzeSurveysBtn" style="font-weight: bold;font-size: 20px;border-top-left-radius: 10px;border-top-right-radius: 10px;border-bottom-right-radius: 10px;border-bottom-left-radius: 10px;margin-right: 10px;margin-bottom: 10px;font-family: hedliner;color: var(--bs-CR-gray); background-color: var(--bs-CR-orange);">
                                        <i class="fas fa-chart-line"></i>
                                        Analizar Encuestas
                                    </button>
                                </div>
                                <div class="d-xxl-flex justify-content-xxl-start align-items-xxl-end" style="width: 100%;margin-top: 10px;font-family: hedliner;">
                                    <button class="btn btn-success d-block w-100" id="consumptionReportBtn" style="font-weight: bold;font-size: 20px;border-top-left-radius: 10px;border-top-right-radius: 10px;border-bottom-right-radius: 10px;border-bottom-left-radius: 10px;margin-right: 10px;margin-bottom: 10px;font-family: hedliner;color: var(--bs-CR-gray); background-color: var(--bs-CR-orange);">
                                        <i class="fas fa-chart-pie"></i>
                                        Informe de Consumo
                                    </button>
                                </div>
                            </div>

                            
                            <div id="divEncuestas" style="flex: 2; padding-left: 15px;">
                                <!-- Loading Spinner -->
                                <div id="loadingSpinner" class="text-center" style="display: none; padding: 40px;">
                                    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                                        <span class="visually-hidden">Cargando...</span>
                                    </div>
                                    <p class="mt-3" style="font-family: hedliner; color: var(--bs-CR-orange);">Cargando encuestas...</p>
                                </div>
                                
                                <!-- Tabla de encuestas -->
                                <div id="tableContainer" class="table-responsive" style="display: none; max-height: 85vh; overflow-y: auto; border: 1px solid #dee2e6; border-radius: 8px;">
                                    <table class="table table-striped table-hover" style="font-family: hedliner; margin-bottom: 0;">
                                        <thead class="table-dark" style="position: sticky; top: 0; z-index: 10;">
                                            <tr>
                                                <th scope="col" style="width: 10%;">ID</th>
                                                <th scope="col" style="width: 15%;">Rating</th>
                                                <th scope="col" style="width: 40%;">Respuesta</th>
                                                <th scope="col" style="width: 25%;">Comentarios</th>
                                                <th scope="col" style="width: 10%;">Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tablaEncuestas" style="font-family: Nunito;">
                                            <!-- Las filas de la tabla se generarán dinámicamente -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>


                            
                        </div>

                    </div>
                </div>  
                            
            </div>
        </div>
    </div>

    <!-- Modal de Informe de Consumo -->
    <div id="consumptionModal" class="modal-overlay">
        <div class="consumption-modal" id="modalContent">
            <button class="close-x" onclick="closeConsumptionModal()">&times;</button>
            <div class="modal-header">
                <h2 class="modal-title">Informe de Consumo</h2>
                <p class="modal-subtitle" id="studyNameInModal">Estudio: [Nombre del Estudio]</p>
            </div>
            
            <!-- Análisis Activos -->
            <div class="consumption-section">
                <div class="section-header">
                    <i class="fas fa-chart-line"></i>
                    <span>Análisis Activos</span>
                </div>
                <div class="section-content" id="analysisContent">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        Cargando análisis...
                    </div>
                </div>
            </div>

            <!-- Cantidad de Filtros -->
            <div class="consumption-section">
                <div class="stat-box">
                    <span class="stat-label">
                        <i class="fas fa-filter"></i> Cantidad de Filtros
                    </span>
                    <span class="stat-value" id="filterCount">
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                        </div>
                    </span>
                </div>
            </div>

            <!-- Total de Tokens -->
            <div class="consumption-section">
                <div class="stat-box">
                    <span class="stat-label">
                        <i class="fas fa-coins"></i> Total de Tokens
                    </span>
                    <span class="stat-value" id="tokenCount">
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                        </div>
                    </span>
                </div>
            </div>

            <div class="modal-buttons">
                <button class="modal-btn btn-export" onclick="exportModalAsImage()">
                    <i class="fas fa-image"></i>
                    Exportar como Imagen
                </button>
                <button class="modal-btn btn-close-modal" onclick="closeConsumptionModal()">
                    <i class="fas fa-times"></i>
                    Cerrar
                </button>
            </div>
        </div>
    </div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
    <script src="assets/js/theme.js"></script>
    <script src="js/Script_CheckSession.js"></script>
    <script src="js/script_InfoEstudio.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/script_DuplicarEstudio.js"></script>
    <script>
        // Variables para datos de consumo
        let consumptionData = {};
        
        // Función para cargar datos reales desde las APIs
        async function loadConsumptionData() {
            const studyId = sessionStorage.getItem('selectedStudyId');
            if (!studyId) {
                console.error('No se encontró el ID del estudio');
                return;
            }

            try {
                // Cargar análisis activos
                loadActiveAnalysis(studyId);
                
                // Cargar cantidad de filtros
                loadFilterCount(studyId);
                
                // Cargar tokens
                loadTokenCount(studyId);
                
            } catch (error) {
                console.error('Error al cargar datos de consumo:', error);
            }
        }

        // Cargar análisis activos
        async function loadActiveAnalysis(studyId) {
            const analysisContent = document.getElementById('analysisContent');
            
            try {
                const response = await axios.get(`https://api.cheetah-research.ai/configuration/get_modules/${studyId}`);
                const modules = response.data.modules;
                
                if (modules && Object.keys(modules).length > 0) {
                    const moduleNames = Object.values(modules);
                    const count = moduleNames.length;
                    
                    let html = `<div style="margin-bottom: 10px; font-weight: bold; color: var(--bs-CR-orange); font-size: 18px;">Total: ${count} análisis</div>`;
                    html += '<ul class="analysis-list">';
                    
                    moduleNames.forEach(name => {
                        html += `<li class="analysis-item"><i class="fas fa-check-circle" style="color: var(--bs-CR-orange); margin-right: 8px;"></i>${name}</li>`;
                    });
                    
                    html += '</ul>';
                    analysisContent.innerHTML = html;
                    consumptionData.analysisCount = count;
                    consumptionData.analysisNames = moduleNames;
                } else {
                    analysisContent.innerHTML = '<div class="no-data">No hay análisis activos</div>';
                    consumptionData.analysisCount = 0;
                    consumptionData.analysisNames = [];
                }
            } catch (error) {
                console.error('Error al cargar análisis:', error);
                analysisContent.innerHTML = '<div class="no-data" style="color: #dc3545;">Error al cargar análisis</div>';
            }
        }

        // Cargar cantidad de filtros
        async function loadFilterCount(studyId) {
            const filterCountElement = document.getElementById('filterCount');
            
            try {
                const response = await axios.get(`https://api.cheetah-research.ai/configuration/get_filters/${studyId}`);
                const filters = response.data;
                
                let count = 0;
                if (filters && typeof filters === 'object') {
                    // Contar cuántos filtros hay
                    count = Object.keys(filters).length;
                }
                
                filterCountElement.textContent = count;
                consumptionData.filterCount = count;
            } catch (error) {
                console.error('Error al cargar filtros:', error);
                filterCountElement.innerHTML = '<span style="font-size: 16px; color: #dc3545;">Error</span>';
            }
        }

        // Cargar total de tokens
        async function loadTokenCount(studyId) {
            const tokenCountElement = document.getElementById('tokenCount');
            
            try {
                const formData = new FormData();
                formData.append('study_id', studyId);
                
                const response = await axios.post('https://api.cheetah-research.ai/chatbot/calculate/', formData);
                const tokens = response.data.calculation || 0;
                
                tokenCountElement.textContent = tokens.toLocaleString();
                consumptionData.totalTokens = tokens;
            } catch (error) {
                console.error('Error al cargar tokens:', error);
                tokenCountElement.innerHTML = '<span style="font-size: 16px; color: #dc3545;">Error</span>';
            }
        }
        
        // Función para abrir el modal
        async function openConsumptionModal() {
            // Actualizar nombre del estudio
            const studyName = document.getElementById('nombreProyectoLbl').textContent || 'Estudio Actual';
            document.getElementById('studyNameInModal').textContent = `Estudio: ${studyName}`;
            
            // Mostrar modal
            document.getElementById('consumptionModal').style.display = 'flex';
            
            // Cargar datos
            await loadConsumptionData();
        }
        
        // Función para cerrar el modal
        function closeConsumptionModal() {
            document.getElementById('consumptionModal').style.display = 'none';
        }
        
        // Función para exportar como imagen
        function exportModalAsImage() {
            const modalContent = document.getElementById('modalContent');
            const studyName = document.getElementById('nombreProyectoLbl').textContent || 'EstudioActual';
            const fileName = `${studyName.replace(/\s+/g, '_')}-informe-consumo.jpg`;
            
            // Ocultar botón de cerrar (X) temporalmente
            const closeBtn = modalContent.querySelector('.close-x');
            const originalDisplay = closeBtn.style.display;
            closeBtn.style.display = 'none';
            
            // Configuración para html2canvas
            const options = {
                backgroundColor: '#ffffff',
                scale: 2,
                useCORS: true,
                allowTaint: true,
                width: modalContent.offsetWidth,
                height: modalContent.offsetHeight
            };
            
            html2canvas(modalContent, options).then(canvas => {
                // Restaurar botón de cerrar
                closeBtn.style.display = originalDisplay;
                
                // Convertir a JPG
                const imgData = canvas.toDataURL('image/jpeg', 0.95);
                
                // Crear enlace de descarga
                const link = document.createElement('a');
                link.download = fileName;
                link.href = imgData;
                
                // Simular click para descargar
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Mostrar mensaje de éxito
                alert('Informe exportado exitosamente como: ' + fileName);
            }).catch(error => {
                // Restaurar botón de cerrar en caso de error
                closeBtn.style.display = originalDisplay;
                console.error('Error al exportar imagen:', error);
                alert('Error al exportar la imagen. Por favor, inténtelo de nuevo.');
            });
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Agregar event listener al botón de informe de consumo
            const consumptionBtn = document.getElementById('consumptionReportBtn');
            if (consumptionBtn) {
                consumptionBtn.addEventListener('click', openConsumptionModal);
            }
            
            // Cerrar modal al hacer click fuera de él
            document.getElementById('consumptionModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeConsumptionModal();
                }
            });
            
            // Cerrar modal con tecla Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeConsumptionModal();
                }
            });
        });
    </script>
</body>

</html>