function otp(e){document.getElementById("overlay").innerHTML=`\n        <div id="overlayContent" style="\n            height: auto;\n            background-color: white;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            border-radius : 13px;\n            text-align: center;\n            text-color: black;\n            padding: 20px;\n        ">\n            <p data-i18n="Overview.warningOTP">Para acceder a esta información, necesitas un código de acceso. Por favor, ingresa el código de acceso que te proporcionaron. Si no posees un OTP, selecciona el botón "Solicitar OTP" para obtener uno.</p>\n            <input type="text" id="otpInput" style="\n                width: 75%;\n                padding: 10px;\n                border-radius : 13px;\n                margin: 10px;\n            ">\n            <button onclick="verificarOTP('${e}')" style="\n                padding: 10px;\n                border-radius : 13px;\n                margin: 10px;\n                background-color: #c0601c;\n                color: white;\n                border: none;\n                cursor: pointer;\n            " data-i18n="Overview.btVerifyOTP">Verificar</button>\n\n           <button onclick="solicitarOTP('${e}')" style="\n                padding: 10px;\n                border-radius : 13px;\n                margin: 10px;\n                background-color: #4CAF50;\n                color: white;\n                border: none;\n                cursor: pointer;\n            " data-i18n="Overview.btRequestOTP">Solicitar OTP</button>\n\n\n\n        </div>\n    `}function solicitarOTP(e){document.getElementById("overlay").innerHTML=`\n        <div id="overlayContent" style="\n            height: auto;\n            background-color: white;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            border-radius : 13px;\n            text-align: center;\n            text-color: black;\n            padding: 20px;\n        ">\n            <p data-i18n="Overview.sMailOTP">Por favor, ingresa tu correo electrónico para solicitar el OTP.</p>\n            <input type="email" id="emailInput" data-i18n-placeholder="Overview.inMailOTP" style="\n                width: 75%;\n                padding: 10px;\n                border-radius : 13px;\n                margin: 10px;\n            ">\n\n            <button onclick="enviarOTP('${e}')" style="\n                padding: 10px;\n                border-radius : 13px;\n                margin: 10px;\n                background-color: #4CAF50;\n                color: white;\n                border: none;\n                cursor: pointer;\n            " data-i18n="Overview.btRequestOTP">Solicitar</button>\n            \n        </div>\n    `}function enviarOTP(e){const n=document.getElementById("emailInput").value;if(n){const t="https://api.cheetah-research.ai/configuration/api/generate-otp-withmail/",o={mongo_studio_id:e,recipients:[n]};axios.post(t,o,{headers:{"Content-Type":"application/json"}}).then((n=>{"OTP email sent successfully"===n.data.success?(alert("El código OTP ha sido enviado a tu correo electrónico."),otp(e)):(alert("Ocurrió un error al enviar el código OTP. Por favor, inténtalo de nuevo."),otp(e))})).catch((e=>{alert("Ocurrió un error al enviar el código OTP. Por favor, inténtalo de nuevo.")}))}else alert("Por favor, ingresa un correo electrónico válido.")}async function LegalDisclaimer(e){document.getElementById("overlay").innerHTML='\n        <div id="overlayContent" style="\n            height: auto;\n            background-color: white;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            border-radius : 13px;\n            text-align: center;\n            color: black;\n            padding: 20px;\n        ">\n             <h1 data-i18n="Overview.overlayTitle">AVISO LEGAL</h1>\n             <p><strong data-i18n="Overview.s1Overlay">Sobre el Contenido:</strong></p>\n                <p data-i18n="Overview.desc1Overlay">\n                    Los datos recopilados y presentados en este estudio son confidenciales y propiedad exclusiva del cliente. \n                    El acceso está restringido por un código distribuido solo a usuarios autorizados. \n                    Cualquier reproducción total o parcial, distribución a terceros o modificación de este contenido fuera de esta plataforma será responsabilidad del cliente.\n                </p>\n                \n                <p><strong data-i18n="Overview.s2Overlay">Sobre la Plataforma:</strong></p>\n                <p data-i18n="Overview.desc2Overlay">\n                    Todos los elementos metodológicos, análisis, diseño, estructura y presentación de resultados en la plataforma Cheetah Research \n                    son propiedad intelectual de Marketing Total y protegidos por la ley de Derechos de Autor y Derechos Conexos. \n                    No deben ser objeto de plagio, reproducción, muestra o utilización por otro proveedor, ejecutor, contratista, \n                    ni transmisión a terceros o cualquier otro uso no previsto.\n                </p>\n                \n                <p data-i18n="Overview.desc3Overlay">\n                    Al acceder al reporte, los usuarios aceptan cumplir con estas condiciones y dan por entendidas las responsabilidades \n                    de cualquier infracción que pueda surgir del uso indebido de la información o la plataforma.\n                </p>\n            <button id="verifyButton" style="\n                padding: 10px;\n                border-radius : 13px;\n                margin: 10px;\n                background-color: var(--bs-CR-orange);\n                color: var(--bs-CR-gray);\n                border: none;\n                cursor: pointer;\n            " data-i18n="Overview.btAccept">Acceder Al Reporte</button>\n        </div>\n    ',await new Promise((n=>{document.getElementById("verifyButton").addEventListener("click",(()=>{n(),contenido(e)}))})),contenido(e)}function verificarLink(e){const n="https://api.cheetah-research.ai/configuration/info_study/"+e;return axios.get(n).then((e=>{let n=e.data.studyStatus;return 0!=n&&1!=n})).catch((e=>!1))}function verificarOTP(e){let n=document.getElementById("otpInput").value;n=n.replace(/\s/g,"");formData=new FormData,formData.append("mongo_studio_id",e),formData.append("otp",n),axios.post("https://api.cheetah-research.ai/configuration/api/validate-otp/",formData).then((n=>{"success"==n.data.status?(otpValidado=!0,contenido(e),localStorage.setItem("otpValidado",!0)):(alert("Código incorrecto. Por favor, inténtalo de nuevo."),otpValidado=!1)})).catch((e=>{alert("Código incorrecto. Por favor, inténtalo de nuevo.")}))}async function initializePage(){const e=new URLSearchParams(window.location.search).get("id");e?await LegalDisclaimer(e):showOverlay()}async function contenido(e){let n=!1;if(otpValidado=localStorage.getItem("otpValidado"),n=!!otpValidado||await verificarLink(e),n){if(otpValidado=localStorage.getItem("otpValidado"),otpValidado){30===(new Date).getDate()&&localStorage.removeItem("otpValidado"),hideOverlay();const n=document.getElementById("contentCard_PaginaOverview"),t="https://api.cheetah-research.ai/configuration/get_studies/";axios.get(t).then((function(t){const o=t.data.find((n=>n._id===e));if(o){const e=`\n                            <style>\n                                .study-title {\n                                    font-size: 2rem;\n                                    font-weight: bold;\n                                    margin-bottom: 10px;\n                                }\n                                .study-section {\n                                    font-size: 1.2rem;\n                                    margin-bottom: 8px;\n                                }\n                                .study-section strong {\n                                    font-size: 1.3rem;\n                                }\n                                .study-content {\n                                    margin-bottom: 15px;\n                                }\n                                .study-bullets {\n                                    text-align: left;\n                                }\n                                .study-bullets li {\n                                    margin-bottom: 8px;\n                                    font-size: 1.1rem;\n                                }\n                            </style>\n                            <div class="study-content">\n                                <h2 class="study-title">${o.title}</h2>\n                                <ul class="study-bullets">\n                                    <li><strong data-i18n="Overview.sStudyObjectives">Objetivo del Estudio:</strong> ${o.studyObjectives}</li>\n                                    <li><strong data-i18n="Overview.sTargetAudience">Mercado Objetivo:</strong> ${o.marketTarget}</li>\n                                    <li><strong data-i18n="Overview.sStudyDate">Fecha del Estudio:</strong> ${new Date(o.studyDate).toLocaleDateString()}</li>\n                                    <li><strong data-i18n="Overview.sStudySummary">Resumen:</strong> ${o.prompt}</li>\n                                </ul>\n                            </div>\n                        `;n.innerHTML=e}else n.innerHTML='<p data-i18n="Overview.eRequestedStudy">No se encontró el estudio solicitado.</p>'})).catch((function(e){n.innerHTML='<p data-i18n="Overview.eLoadStudies">Ocurrió un error al cargar los estudios.</p>'}))}else if(otp(e),otpValidado){hideOverlay();const n=document.getElementById("contentCard_PaginaOverview"),t="https://api.cheetah-research.ai/configuration/get_studies/";axios.get(t).then((function(t){const o=t.data.find((n=>n._id===e));if(o){const e=`\n                                <style>\n                                    .study-title {\n                                        font-size: 2rem;\n                                        font-weight: bold;\n                                        margin-bottom: 10px;\n                                    }\n                                    .study-section {\n                                        font-size: 1.2rem;\n                                        margin-bottom: 8px;\n                                    }\n                                    .study-section strong {\n                                        font-size: 1.3rem;\n                                    }\n                                    .study-content {\n                                        margin-bottom: 15px;\n                                    }\n                                </style>\n                                <div class="study-content">\n                                    <h2 class="study-title">${o.title}</h2>\n                                    <p class="study-section"><strong data-i18n="Overview.sStudyObjectives">Objetivo del Estudio:</strong> ${o.studyObjectives}</p>\n                                    <p class="study-section"><strong data-i18n="Overview.sTargetAudience">Mercado Objetivo:</strong> ${o.marketTarget}</p>\n                                    <p class="study-section"><strong data-i18n="Overview.sStudyDate">Fecha del Estudio:</strong> ${new Date(o.studyDate).toLocaleDateString()}</p>\n                                    <p class="study-section"><strong data-i18n="Overview.sStudySummary">Resumen:</strong> ${o.prompt}</p>\n                                </div>\n                            `;n.innerHTML=e}else n.innerHTML='<p data-i18n="Overview.eRequestedStudy">No se encontró el estudio solicitado.</p>'})).catch((function(e){n.innerHTML='<p data-i18n="Overview.eLoadStudies">Ocurrió un error al cargar los estudios.</p>'}))}}else showOverlay()}function linkDesactivado(){document.getElementById("overlay").innerHTML='\n        <div id="overlayContent" style="\n            height: auto;\n            background-color: white;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            border-radius : 13px;\n            text-align: center;\n            text-color: black;\n            padding: 20px;\n        ">\n            <p data-i18n="Overview.eUnavailableLink">Parece que el enlace ya no está disponible. Si necesitas acceder a esta información, no dudes en contactarnos, ¡estamos aquí para ayudarte a resolverlo!</p>\n        </div>\n    ',removeLinks()}function removeLinks(){var e=document.getElementById("socrates-link"),n=document.getElementById("analis-link"),t=document.getElementById("home-link"),o=document.getElementById("home-link2");e.removeAttribute("href"),n.removeAttribute("href"),t.removeAttribute("href"),o.removeAttribute("href")}function showOverlay(){document.getElementById("overlay").style.display="block",linkDesactivado()}function hideOverlay(){document.getElementById("overlay").style.display="none"}otpValidado=!1;